<html>

<body>

  <head>
    <script src="https://cdn.jsdelivr.net/npm/htmlelement-extension@0.8.8/distrib/htmlElement.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/htmlelement-events-extension@0.9.8/distrib/htmlElement-events.min.js"></script>
    <link href="https://sylvain59650.github.io/demonstrator/css/style.css" type="text/css" rel="stylesheet" />
    <link href="https://sylvain59650.github.io/demonstrator/css/demo.css" type="text/css" rel="stylesheet" />
    <link href="../css/custom.css" type="text/css" rel="stylesheet" />
  </head>
  <div class="breadcrumb">
    <a href="https://www.npmjs.com/package/format-validator" title="NPM">
      <img src="https://sylvain59650.github.io/demonstrator/img/npm.png" height="32"></a>
    <a href="https://github.com/Sylvain59650/format-validator" title="GitHub"><img src="https://github.com/favicon.ico" height="32" /></a>
    <a href="index.html" title="API"><img src="https://sylvain59650.github.io/demonstrator/img/api.png" height="32" /></a>
  </div>

  <h2>Validation by server</h2>
  <input type="text" id="inp" /><label id="output"></label><label id="msg"></label>
  <button type="button" id="btn">Check</button>
  <script src="modules/format-validator/distrib/format-validator.min.js"></script>
  <script>
    document.ready(function() {
      var inp = qsi("inp");
      var output = qsi("output");
      var btn = qsi("btn");
      var msg = qsi("msg");
      var options = {
        templateUrl: "https://sylvain59650.github.io/my-repositories/randoms/response%value%.json",
        onResponse: function(result) {
          if (result.cd === 0) {
            output.addClass("ok");
            output.removeClass("ko");
            msg.innerHTML = "";
          } else {
            output.addClass("ko");
            output.removeClass("ok");
            msg.innerHTML = result.msg;
          }
        },
        onError: function() {
          alert("erreur");
        }
      };
      btn.on("click", function() {
        var input = parseInt(inp.value, 10) % 3;
        validators.isValid(input, options);
      });
    });
  </script>
</body>

</html>